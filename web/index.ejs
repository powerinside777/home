<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- META SECTION -->
        <title>Joli Admin - Responsive Bootstrap Admin Template</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
      <script type="text/javascript" src="js/plugins/jquery/jquery.min.js"></script>
      <script type="text/javascript" src="js/plugins/jquery/jquery-ui.min.js"></script>
      <script type="text/javascript" src="js/plugins/bootstrap/bootstrap.min.js"></script>
        <link rel="icon" href="favicon.ico" type="image/x-icon" />
        <!-- END META SECTION -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.16/angular.min.js"></script>
        <!-- CSS INCLUDE -->
        <link rel="stylesheet" type="text/css" id="theme" href="css/theme-default.css"/>
        <!-- EOF CSS INCLUDE -->
    </head>
    <body ng-app="app" ng-controller="ButtonPageCtrl" class="page-container-boxed">
        <!-- START PAGE CONTAINER -->
        <div class="page-container">


            <!-- PAGE CONTENT -->
            <div class="page-content">

                <!-- START X-NAVIGATION VERTICAL -->
                <ul class="x-navigation x-navigation-horizontal x-navigation-panel">
                  <li class="xn-icon-button pull-left">
                  </li>
                    <!-- SIGN OUT -->
                    <li class="xn-icon-button pull-right">
                        <a href="#" class="mb-control" data-box="#mb-signout"><span class="fa fa-sign-out"></span></a>
                    </li>
                    <!-- END SIGN OUT -->
                    <!-- MESSAGES -->

                </ul>
                <!-- END X-NAVIGATION VERTICAL -->


                <!-- PAGE TITLE -->
                <div class="page-title">
                    <h2><span class="fa fa-bell-o"></span> House Alarm</h2>
                </div>
                <!-- END PAGE TITLE -->

                <!-- PAGE CONTENT WRAPPER -->
                <div class="page-content-wrap">

                    <!-- TILES -->
                    <div class="row">
                        <div class="col-md-4">

                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h3 class="panel-title"><span class="fa fa-cogs"></span> Settings</h3>
                                    <ul class="panel-controls">
                                        <li><a href="#" class="panel-collapse"><span class="fa fa-angle-down"></span></a></li>
                                        <li><a href="#" class="panel-refresh"><span class="fa fa-refresh"></span></a></li>
                                        <li><a href="#" class="panel-remove"><span class="fa fa-times"></span></a></li>
                                    </ul>
                                </div>
                                <div class="panel-body">
                                    <form action="#" role="form" class="form-horizontal">
                                        <div class="form-group">
                                            <label class="col-md-4 control-label text-left">Wi-Fi email</label>
                                            <div class="col-md-3">
                                                <label class="switch">
                                                    <input type="checkbox" class="switch" value="1" checked/>
                                                    <span></span>
                                                </label>
                                            </div>
                                            <div class="col-md-5">
                                                <span class="help-block">Send email on alarm</span>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-md-4 control-label text-left">SMS</label>
                                            <div class="col-md-3">
                                                <label class="switch">
                                                    <input type="checkbox" class="switch" value="1" checked/>
                                                    <span></span>
                                                </label>
                                            </div>
                                            <div class="col-md-5">
                                                <span class="help-block">Send sms on alarm </span>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-md-4 control-label text-left">Celluar</label>
                                            <div class="col-md-3">
                                                <label class="switch">
                                                    <input type="checkbox" class="switch" value="1"/>
                                                    <span></span>
                                                </label>
                                            </div>
                                            <div class="col-md-5">
                                                <span class="help-block">They steal money :(</span>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-md-4 control-label text-left">Find my Phone</label>
                                            <div class="col-md-3">
                                                <label class="switch">
                                                    <input type="checkbox" class="switch" value="1" checked/>
                                                    <span></span>
                                                </label>
                                            </div>
                                            <div class="col-md-5">
                                                <span class="help-block">Nice feature</span>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-md-4 control-label text-left">Sounds</label>
                                            <div class="col-md-3">
                                                <label class="switch">
                                                    <input type="checkbox" class="switch" value="1"/>
                                                    <span></span>
                                                </label>
                                            </div>
                                            <div class="col-md-5">
                                                <span class="help-block">Wanna mute?</span>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>

                        </div>


                        <!-- END SETTINGS WIDGET -->



                          <section class="col-md-6 col-lg-3">



                        <div class="col-md-3">
                        </div>
                            </section>

                    <div class="row">
                      <!-- PROFILE WIDGET -->
                      <div class="col-md-4">

                        <div class="panel panel-default">
                          <div class="panel-body profile bg-info">

                            <div class="profile-image">
                              <img src="assets/images/users/lock2.png" id="alarmimage" alt="John Doe">
                            </div>
                            <div class="profile-data">
                              <div class="profile-data-name">Alarm Status</div>
                              <div class="profile-data-title"></div>
                            </div>
                            <div class="profile-controls">

                              <button progress-button="progressFunctionarm()" pb-style="rotate-side-down " class=" btn btn-warning">Arm</button>

                              <button progress-button="progressFunctiondisarm()"  pb-style="rotate-side-down" class=" btn btn-danger">Disarm</button>

                            </div>

                          </div>
                          <div style="width:100%; height:100%">


                          </div>
                        </div>

                      </div>
                    </div>
                    <!-- END TILES -->


                    <!-- WIDGETS -->
                    <div class="row">


                    </div>
                    <div class="row">


                    </div>
                    <!-- END WIDGETS -->

                    <div class="row">
                        <!-- CONTACTS WITH CONTROLS -->
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title">Device Pairing</h3>
                            </div>
                            <form name="userFormTwo" novalidate>
                                <div class="form-group" ng-repeat="devices in formDataTwo.devices" >
                                    <ng-form name="userFieldForm">
                                        <div class="panel-body list-group list-group-contacts">
                                            <a  class="list-group-item">
                                                <img src="img/PIR.png" class="pull-left" alt=""/>
                                                <span class="contacts-title">{{ devices.id }}</span>
                                                <p>{{ devices.active }}</p>
                                                <div class="list-group-controls">
                                                    <label class="switch">
                                                        <input
                                                                type="checkbox"
                                                                name="paire"
                                                                value="{{devices.selected }}"
                                                                ng-model="devices.selected"
                                                                ng-click="toggleSelection(devices.selected)"
                                                        >
                                                        <span></span>
                                                    </label>
                                                </div>
                                            </a>
                                        </div>
                                    </ng-form>
                                    </div>
                            </form>

                        </div>
                        <!-- END CONTACTS WITH CONTROLS -->




                    </div>

                    <div class="row">

                    </div>

                    <div class="row">



                    </div>

                    <div class="row">



                    </div>

                    <div class="row">
                        <!-- PRICING TABLE -->


                </div>
                <!-- END PAGE CONTENT WRAPPER -->

            </div>
            <!-- END PAGE CONTENT -->
        </div>
        <!-- END PAGE CONTAINER -->

        <!-- MESSAGE BOX-->
        <div class="message-box animated fadeIn" data-sound="alert" id="mb-signout">
            <div class="mb-container">
                <div class="mb-middle">
                    <div class="mb-title"><span class="fa fa-sign-out"></span> Log <strong>Out</strong> ?</div>
                    <div class="mb-content">
                        <p>Are you sure you want to log out?</p>
                        <p>Press No if youwant to continue work. Press Yes to logout current user.</p>
                    </div>
                    <div class="mb-footer">
                        <div class="pull-right">
                            <a href="pages-login.html" class="btn btn-success btn-lg">Yes</a>
                            <button class="btn btn-default btn-lg mb-control-close">No</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- END MESSAGE BOX-->


    <!-- START SCRIPTS -->
        <!-- START PLUGINS -->

        <!-- END PLUGINS -->

        <!-- START THIS PAGE PLUGINS-->
        <script type='text/javascript' src='js/plugins/icheck/icheck.min.js'></script>
        <script type="text/javascript" src="js/plugins/mcustomscrollbar/jquery.mCustomScrollbar.min.js"></script>

        <script type="text/javascript" src="js/plugins/knob/jquery.knob.min.js"></script>
        <script type="text/javascript" src="js/plugins/owl/owl.carousel.min.js"></script>
        <script type="text/javascript" src="js/plugins/tagsinput/jquery.tagsinput.min.js"></script>
        <!-- END THIS PAGE PLUGINS-->
              <script type="text/javascript" src="js/plugins/knob/jquery.knob.min.js"></script>
              <script type="text/javascript" src="js/plugins/owl/owl.carousel.min.js"></script>
              <script type="text/javascript" src="js/plugins/tagsinput/jquery.tagsinput.min.js"></script>
              <!-- START THIS PAGE PLUGINS-->
              <script type='text/javascript' src='js/plugins/icheck/icheck.min.js'></script>
              <script type="text/javascript" src="js/plugins/mcustomscrollbar/jquery.mCustomScrollbar.min.js"></script>
              <script type="text/javascript" src="js/plugins/scrolltotop/scrolltopcontrol.js"></script>
        <!-- START TEMPLATE -->
              <script type="text/javascript" src="js/actions.js"></script>
        <script type="text/javascript" src="js/plugins.js"></script>

        <!-- END TEMPLATE -->
            <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js" ></script>
          <script type="text/javascript" src="bower_components/angular-progress-button-styles/dist/angular-progress-button-styles.min.js"></script>
          <link rel="stylesheet" type="text/css" href="bower_components/angular-progress-button-styles/dist/angular-progress-button-styles.min.css">
<script>
  var app = angular.module('app', ['angular-progress-button-styles'])
    .controller('ButtonPageCtrl', ButtonPageCtrl);//
  function ButtonPageCtrl($scope, $timeout) {
    $scope.progressFunctionarm = function() {
      return $timeout(function() {console.log('arm')
        $('#alarmimage').attr("src",'assets/images/users/lock1.png');
        $.post('/arm',
        function() {
        console.log('poseted')
        },
        "json");


      }, 10000);
    };
    $scope.progressFunctiondisarm = function() {
      return $timeout(function() {console.log('arm')
        $.post('/disarm',
          function() {
            console.log('poseted')
          },
          "json");
        $('#alarmimage').attr("src",'assets/images/users/lock2.png');
      }, 5000);
    };
  }
  setInterval(function(){
    $.getJSON("/alarm.json", function(result) {
      if(result.Status == 'on')
        $('#alarmimage').attr("src",'assets/images/users/lock1.png');
      else if(result.Status == 'off')
        $('#alarmimage').attr("src",'assets/images/users/lock2.png');


    });


  }, 30000);
  $.getJSON("/alarm.json", function(result) {
    if(result.status == 'on')
      $('#alarmimage').attr("src",'assets/images/users/lock1.png');
    else if(result.status == 'off')
      $('#alarmimage').attr("src",'assets/images/users/lock2.png');


  });
</script>
    </body>
</html>






